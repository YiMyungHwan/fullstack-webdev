<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 1. 사용자 아이디는 5자리 이상 15자리 이하입니다.
      // 2. 알파벳 소문자, 숫자, 밑줄(_), 마침표(.)만 포함할 수 있습니다.
      // 3. 밑줄은 연속해서 2개 사용할 수 없습니다.
      // 4. 마침표는 1개만 사용할 수 있습니다.
      // 5. 아이디 시작은 반드시 소문자여야 합니다.
      // 6. 아이디 마지막 문자는 소문자 또는 숫자만 가능합니다.
      // 7. 조건을 만족하면 true, 만족하지 않으면 false 반환하세요.
      function checkUserId(userId) {
        if (!/^.{5,15}$/.test(userId)) {
          // 사용자 아이디는 5자리 이상 15자리 이하입니다.
          return false;
        }

        if (/![a-z0-9_\.]+/.test(userId)) {
          // 알파벳 소문자, 숫자, 밑줄, 마침표만 사용할 수 있습니다.
          return false;
        }

        if (/_{2}/.test(userId)) {
          // 밑줄은 연속해서 2개 사용할 수 없습니다."
          return false;
        }

        // abc.def ==> ["abc", "def"]
        // abc.def.geh ==> ["abc", "def", "geh"]
        if (userId.split(".").length > 2) {
          // 마침표는 1개만 사용할 수 있습니다.
          return false;
        }

        // abc.def ==> ["."]
        // abc.def.geh ==> [".", "."]
        if (userId.match(/\./g).length > 1) {
          // 마침표는 1개만 사용할 수 있습니다.
          return false;
        }

        // abc..f ==> ["."]`
        if (/\..*\./.test(userId)) {
          return false;
        }

        if (!/^[a-z]/.test(userId)) {
          // 아이디 시작은 반드시 소문자여야 합니다.
          return false;
        }
        if (!/[a-z\d]$/.test(userId)) {
          // 아이디 마지막 문자는 소문자 또는 숫자만 가능합니다.
          return false;
        }

        // if (!/^[(a-z)+\d]*(\_)?(\.)?[(a-z)+\d]*(\_)*$/.test(userId)) {
        //   // 마침표는 중간에 1개만 사용할 수 있습니다.
        //   return false;
        // }

        return true;
      }

      console.log(checkUserId("gg.ddd")); // true
      console.log(checkUserId("gg.dd.d")); // false
      console.log(checkUserId("gg_ddd")); //true
      console.log(checkUserId("gg__ddd")); //false
    </script>
  </body>
</html>
